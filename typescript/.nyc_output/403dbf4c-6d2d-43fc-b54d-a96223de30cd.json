{"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Product.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Product.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":25}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":25}},"3":{"start":{"line":9,"column":0},"end":{"line":9,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":28},"end":{"line":7,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":2,"2":2,"3":1},"f":{"0":2},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Product.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Product.ts"],"names":[],"mappings":";;AAEA,MAAa,OAAO;IAEhB,YAA4B,IAAY,EACZ,IAAiB;QADjB,SAAI,GAAJ,IAAI,CAAQ;QACZ,SAAI,GAAJ,IAAI,CAAa;IAC7C,CAAC;CACJ;AALD,0BAKC","sourcesContent":["import {ProductUnit} from \"./ProductUnit\"\n\nexport class Product {\n\n    constructor(public readonly name: string,\n                public readonly unit: ProductUnit) {\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7490f6a04c3d4dd60ea751b4f75e9c1187de09b8","contentHash":"3587744b70e5b1aa19d430a147ac41d994c534b2e589153ed279e74b8d168663"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ShoppingCart.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ShoppingCart.ts","statementMap":{"0":{"start":{"line":2,"column":19},"end":{"line":8,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},"2":{"start":{"line":3,"column":31},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":17},"end":{"line":4,"column":19}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},"5":{"start":{"line":5,"column":21},"end":{"line":5,"column":99}},"6":{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},"7":{"start":{"line":5,"column":80},"end":{"line":5,"column":99}},"8":{"start":{"line":6,"column":4},"end":{"line":6,"column":28}},"9":{"start":{"line":7,"column":4},"end":{"line":7,"column":18}},"10":{"start":{"line":9,"column":0},"end":{"line":9,"column":62}},"11":{"start":{"line":10,"column":10},"end":{"line":10,"column":41}},"12":{"start":{"line":11,"column":26},"end":{"line":11,"column":54}},"13":{"start":{"line":12,"column":19},"end":{"line":12,"column":40}},"14":{"start":{"line":13,"column":27},"end":{"line":13,"column":56}},"15":{"start":{"line":16,"column":8},"end":{"line":16,"column":24}},"16":{"start":{"line":17,"column":8},"end":{"line":17,"column":37}},"17":{"start":{"line":20,"column":8},"end":{"line":20,"column":35}},"18":{"start":{"line":23,"column":8},"end":{"line":23,"column":43}},"19":{"start":{"line":26,"column":8},"end":{"line":26,"column":39}},"20":{"start":{"line":29,"column":30},"end":{"line":29,"column":86}},"21":{"start":{"line":30,"column":8},"end":{"line":30,"column":41}},"22":{"start":{"line":31,"column":30},"end":{"line":31,"column":67}},"23":{"start":{"line":32,"column":8},"end":{"line":37,"column":9}},"24":{"start":{"line":33,"column":12},"end":{"line":33,"column":110}},"25":{"start":{"line":36,"column":12},"end":{"line":36,"column":68}},"26":{"start":{"line":40,"column":8},"end":{"line":40,"column":99}},"27":{"start":{"line":43,"column":8},"end":{"line":82,"column":9}},"28":{"start":{"line":44,"column":36},"end":{"line":44,"column":72}},"29":{"start":{"line":45,"column":28},"end":{"line":45,"column":51}},"30":{"start":{"line":46,"column":29},"end":{"line":46,"column":74}},"31":{"start":{"line":47,"column":12},"end":{"line":81,"column":13}},"32":{"start":{"line":48,"column":30},"end":{"line":48,"column":49}},"33":{"start":{"line":49,"column":34},"end":{"line":49,"column":63}},"34":{"start":{"line":50,"column":36},"end":{"line":50,"column":44}},"35":{"start":{"line":51,"column":31},"end":{"line":51,"column":35}},"36":{"start":{"line":52,"column":24},"end":{"line":52,"column":25}},"37":{"start":{"line":53,"column":16},"end":{"line":63,"column":17}},"38":{"start":{"line":54,"column":20},"end":{"line":54,"column":26}},"39":{"start":{"line":56,"column":21},"end":{"line":63,"column":17}},"40":{"start":{"line":57,"column":20},"end":{"line":57,"column":26}},"41":{"start":{"line":58,"column":20},"end":{"line":62,"column":21}},"42":{"start":{"line":59,"column":38},"end":{"line":59,"column":116}},"43":{"start":{"line":60,"column":42},"end":{"line":60,"column":70}},"44":{"start":{"line":61,"column":24},"end":{"line":61,"column":106}},"45":{"start":{"line":64,"column":16},"end":{"line":66,"column":17}},"46":{"start":{"line":65,"column":20},"end":{"line":65,"column":26}},"47":{"start":{"line":67,"column":35},"end":{"line":67,"column":64}},"48":{"start":{"line":68,"column":16},"end":{"line":71,"column":17}},"49":{"start":{"line":69,"column":43},"end":{"line":69,"column":128}},"50":{"start":{"line":70,"column":20},"end":{"line":70,"column":91}},"51":{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},"52":{"start":{"line":73,"column":20},"end":{"line":73,"column":137}},"53":{"start":{"line":75,"column":16},"end":{"line":78,"column":17}},"54":{"start":{"line":76,"column":42},"end":{"line":76,"column":126}},"55":{"start":{"line":77,"column":20},"end":{"line":77,"column":109}},"56":{"start":{"line":79,"column":16},"end":{"line":80,"column":50}},"57":{"start":{"line":80,"column":20},"end":{"line":80,"column":50}},"58":{"start":{"line":85,"column":0},"end":{"line":85,"column":36}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":50},"end":{"line":2,"column":51}},"loc":{"start":{"line":2,"column":65},"end":{"line":8,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":15,"column":4},"end":{"line":15,"column":5}},"loc":{"start":{"line":15,"column":18},"end":{"line":18,"column":5}},"line":15},"2":{"name":"(anonymous_2)","decl":{"start":{"line":19,"column":4},"end":{"line":19,"column":5}},"loc":{"start":{"line":19,"column":15},"end":{"line":21,"column":5}},"line":19},"3":{"name":"(anonymous_3)","decl":{"start":{"line":22,"column":4},"end":{"line":22,"column":5}},"loc":{"start":{"line":22,"column":21},"end":{"line":24,"column":5}},"line":22},"4":{"name":"(anonymous_4)","decl":{"start":{"line":25,"column":4},"end":{"line":25,"column":5}},"loc":{"start":{"line":25,"column":24},"end":{"line":27,"column":5}},"line":25},"5":{"name":"(anonymous_5)","decl":{"start":{"line":28,"column":4},"end":{"line":28,"column":5}},"loc":{"start":{"line":28,"column":39},"end":{"line":38,"column":5}},"line":28},"6":{"name":"(anonymous_6)","decl":{"start":{"line":39,"column":4},"end":{"line":39,"column":5}},"loc":{"start":{"line":39,"column":57},"end":{"line":41,"column":5}},"line":39},"7":{"name":"(anonymous_7)","decl":{"start":{"line":42,"column":4},"end":{"line":42,"column":5}},"loc":{"start":{"line":42,"column":43},"end":{"line":83,"column":5}},"line":42}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":19},"end":{"line":8,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":20},"end":{"line":2,"column":24}},{"start":{"line":2,"column":28},"end":{"line":2,"column":45}},{"start":{"line":2,"column":50},"end":{"line":8,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},{"start":{"line":3,"column":4},"end":{"line":3,"column":42}}],"line":3},"2":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":29}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":11}},{"start":{"line":3,"column":15},"end":{"line":3,"column":29}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},{"start":{"line":5,"column":4},"end":{"line":5,"column":99}}],"line":5},"4":{"loc":{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},"type":"if","locations":[{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},{"start":{"line":5,"column":40},"end":{"line":5,"column":99}}],"line":5},"5":{"loc":{"start":{"line":32,"column":8},"end":{"line":37,"column":9}},"type":"if","locations":[{"start":{"line":32,"column":8},"end":{"line":37,"column":9}},{"start":{"line":32,"column":8},"end":{"line":37,"column":9}}],"line":32},"6":{"loc":{"start":{"line":47,"column":12},"end":{"line":81,"column":13}},"type":"if","locations":[{"start":{"line":47,"column":12},"end":{"line":81,"column":13}},{"start":{"line":47,"column":12},"end":{"line":81,"column":13}}],"line":47},"7":{"loc":{"start":{"line":53,"column":16},"end":{"line":63,"column":17}},"type":"if","locations":[{"start":{"line":53,"column":16},"end":{"line":63,"column":17}},{"start":{"line":53,"column":16},"end":{"line":63,"column":17}}],"line":53},"8":{"loc":{"start":{"line":56,"column":21},"end":{"line":63,"column":17}},"type":"if","locations":[{"start":{"line":56,"column":21},"end":{"line":63,"column":17}},{"start":{"line":56,"column":21},"end":{"line":63,"column":17}}],"line":56},"9":{"loc":{"start":{"line":58,"column":20},"end":{"line":62,"column":21}},"type":"if","locations":[{"start":{"line":58,"column":20},"end":{"line":62,"column":21}},{"start":{"line":58,"column":20},"end":{"line":62,"column":21}}],"line":58},"10":{"loc":{"start":{"line":64,"column":16},"end":{"line":66,"column":17}},"type":"if","locations":[{"start":{"line":64,"column":16},"end":{"line":66,"column":17}},{"start":{"line":64,"column":16},"end":{"line":66,"column":17}}],"line":64},"11":{"loc":{"start":{"line":68,"column":16},"end":{"line":71,"column":17}},"type":"if","locations":[{"start":{"line":68,"column":16},"end":{"line":71,"column":17}},{"start":{"line":68,"column":16},"end":{"line":71,"column":17}}],"line":68},"12":{"loc":{"start":{"line":68,"column":20},"end":{"line":68,"column":107}},"type":"binary-expr","locations":[{"start":{"line":68,"column":20},"end":{"line":68,"column":86}},{"start":{"line":68,"column":90},"end":{"line":68,"column":107}}],"line":68},"13":{"loc":{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},"type":"if","locations":[{"start":{"line":72,"column":16},"end":{"line":74,"column":17}},{"start":{"line":72,"column":16},"end":{"line":74,"column":17}}],"line":72},"14":{"loc":{"start":{"line":75,"column":16},"end":{"line":78,"column":17}},"type":"if","locations":[{"start":{"line":75,"column":16},"end":{"line":78,"column":17}},{"start":{"line":75,"column":16},"end":{"line":78,"column":17}}],"line":75},"15":{"loc":{"start":{"line":75,"column":20},"end":{"line":75,"column":110}},"type":"binary-expr","locations":[{"start":{"line":75,"column":20},"end":{"line":75,"column":88}},{"start":{"line":75,"column":92},"end":{"line":75,"column":110}}],"line":75},"16":{"loc":{"start":{"line":79,"column":16},"end":{"line":80,"column":50}},"type":"if","locations":[{"start":{"line":79,"column":16},"end":{"line":80,"column":50}},{"start":{"line":79,"column":16},"end":{"line":80,"column":50}}],"line":79}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":308,"7":308,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":0,"19":1,"20":1,"21":1,"22":1,"23":1,"24":0,"25":1,"26":0,"27":1,"28":1,"29":1,"30":1,"31":1,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0,"56":0,"57":0,"58":1},"f":{"0":1,"1":1,"2":1,"3":0,"4":1,"5":1,"6":0,"7":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,0],"4":[308,0],"5":[0,1],"6":[0,1],"7":[0,0],"8":[0,0],"9":[0,0],"10":[0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0]},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ShoppingCart.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ShoppingCart.ts"],"names":[],"mappings":"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","sourcesContent":["import {Product} from \"./Product\"\nimport {SupermarketCatalog} from \"./SupermarketCatalog\"\nimport * as _ from \"lodash\"\nimport {ProductQuantity} from \"./ProductQuantity\"\nimport {Discount} from \"./Discount\"\nimport {Receipt} from \"./Receipt\"\nimport {Offer} from \"./Offer\"\nimport {SpecialOfferType} from \"./SpecialOfferType\"\n\ntype ProductQuantities = { [productName: string]: ProductQuantity }\nexport type OffersByProduct = {[productName: string]: Offer};\n\nexport class ShoppingCart {\n\n    private readonly  items: ProductQuantity[] = [];\n    _productQuantities: ProductQuantities = {};\n\n\n    getItems(): ProductQuantity[] {\n        return _.clone(this.items);\n    }\n\n    addItem(product: Product): void {\n        this.addItemQuantity(product, 1.0);\n    }\n\n    productQuantities(): ProductQuantities {\n        return this._productQuantities;\n    }\n\n\n    public addItemQuantity(product: Product, quantity: number): void {\n        let productQuantity = new ProductQuantity(product, quantity)\n        this.items.push(productQuantity);\n        let currentQuantity = this._productQuantities[product.name]\n        if (currentQuantity) {\n            this._productQuantities[product.name] = this.increaseQuantity(product, currentQuantity, quantity);\n        } else {\n            this._productQuantities[product.name] = productQuantity;\n        }\n\n    }\n\n    private increaseQuantity(product: Product, productQuantity: ProductQuantity, quantity: number) {\n        return new ProductQuantity(product, productQuantity.quantity + quantity)\n    }\n\n    handleOffers(receipt: Receipt,  offers: OffersByProduct, catalog: SupermarketCatalog ):void {\n        for (const productName in this.productQuantities()) {\n            const productQuantity = this._productQuantities[productName]\n            const product = productQuantity.product;\n            const quantity: number = this._productQuantities[productName].quantity;\n            if (offers[productName]) {\n                const offer : Offer = offers[productName];\n                const unitPrice: number= catalog.getUnitPrice(product);\n                let quantityAsInt = quantity;\n                let discount : Discount|null = null;\n                let x = 1;\n                if (offer.offerType == SpecialOfferType.ThreeForTwo) {\n                    x = 3;\n\n                } else if (offer.offerType == SpecialOfferType.TwoForAmount) {\n                    x = 2;\n                    if (quantityAsInt >= 2) {\n                        const total = offer.argument * Math.floor(quantityAsInt / x) + quantityAsInt % 2 * unitPrice;\n                        const discountN = unitPrice * quantity - total;\n                        discount = new Discount(product, \"2 for \" + offer.argument, discountN);\n                    }\n\n                } if (offer.offerType == SpecialOfferType.FiveForAmount) {\n                    x = 5;\n                }\n                const numberOfXs = Math.floor(quantityAsInt / x);\n                if (offer.offerType == SpecialOfferType.ThreeForTwo && quantityAsInt > 2) {\n                    const discountAmount = quantity * unitPrice - ((numberOfXs * 2 * unitPrice) + quantityAsInt % 3 * unitPrice);\n                    discount = new Discount(product, \"3 for 2\", discountAmount);\n                }\n                if (offer.offerType == SpecialOfferType.TenPercentDiscount) {\n                    discount = new Discount(product, offer.argument + \"% off\", quantity * unitPrice * offer.argument / 100.0);\n                }\n                if (offer.offerType == SpecialOfferType.FiveForAmount && quantityAsInt >= 5) {\n                    const discountTotal = unitPrice * quantity - (offer.argument * numberOfXs + quantityAsInt % 5 * unitPrice);\n                    discount = new Discount(product, x + \" for \" + offer.argument, discountTotal);\n                }\n                if (discount != null)\n                    receipt.addDiscount(discount);\n            }\n\n        }\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"bd9dfaeeff22cc5f4961549231107cf3253dbf67","contentHash":"a9d922a37f93ac11034d5a29ed3e67d5f4f1397da20654a748209e31a3acd98d"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductQuantity.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductQuantity.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":31}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":33}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":42}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":35},"end":{"line":9,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductQuantity.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductQuantity.ts"],"names":[],"mappings":";;AAEA,MAAa,eAAe;IAExB,YAA4B,OAAgB,EAChB,QAAgB;QADhB,YAAO,GAAP,OAAO,CAAS;QAChB,aAAQ,GAAR,QAAQ,CAAQ;QACxC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;IAC7B,CAAC;CACJ;AAPD,0CAOC","sourcesContent":["import {Product} from \"./Product\"\n\nexport class ProductQuantity {\n\n    constructor(public readonly product: Product,\n                public readonly quantity: number) {\n        this.product = product;\n        this.quantity = quantity;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"513256c9197e9e41b3541301189838e7c7027a4b","contentHash":"df3f2bf6c538efd46ae01ae203e2850799b41cfba3b7ca82bef17bcf816ca5cc"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Discount.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Discount.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":31}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":39}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":45}},"4":{"start":{"line":10,"column":0},"end":{"line":10,"column":28}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":54},"end":{"line":8,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":0,"2":0,"3":0,"4":1},"f":{"0":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Discount.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Discount.ts"],"names":[],"mappings":";;AAEA,MAAa,QAAQ;IAEjB,YAA4B,OAAgB,EAChB,WAAmB,EACnB,cAAsB;QAFtB,YAAO,GAAP,OAAO,CAAS;QAChB,gBAAW,GAAX,WAAW,CAAQ;QACnB,mBAAc,GAAd,cAAc,CAAQ;IAClD,CAAC;CACJ;AAND,4BAMC","sourcesContent":["import {Product} from \"./Product\"\n\nexport class Discount {\n\n    constructor(public readonly product: Product,\n                public readonly description: string,\n                public readonly discountAmount: number) {\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"046b99cf71bcac3cf46a01ae1839b779e74d4318","contentHash":"9e64e9fd968f698986ed9e79814dee0eb4f6748ce367e34509477a3c5a66a994"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/SpecialOfferType.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/SpecialOfferType.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":4,"column":0},"end":{"line":9,"column":83}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":74}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":88}},"4":{"start":{"line":7,"column":4},"end":{"line":7,"column":76}},"5":{"start":{"line":8,"column":4},"end":{"line":8,"column":78}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":1},"end":{"line":4,"column":2}},"loc":{"start":{"line":4,"column":29},"end":{"line":9,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":9,"column":22},"end":{"line":9,"column":81}},"type":"binary-expr","locations":[{"start":{"line":9,"column":22},"end":{"line":9,"column":46}},{"start":{"line":9,"column":51},"end":{"line":9,"column":80}}],"line":9}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/SpecialOfferType.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/SpecialOfferType.ts"],"names":[],"mappings":";;AACA,IAAY,gBAEX;AAFD,WAAY,gBAAgB;IACxB,qEAAW,CAAA;IAAE,mFAAkB,CAAA;IAAE,uEAAY,CAAA;IAAE,yEAAa,CAAA;AAChE,CAAC,EAFW,gBAAgB,GAAhB,wBAAgB,KAAhB,wBAAgB,QAE3B","sourcesContent":["\nexport enum SpecialOfferType {\n    ThreeForTwo, TenPercentDiscount, TwoForAmount, FiveForAmount\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"cbde09291088428449a2f9dd93bd58a9f71e5c6a","contentHash":"ba71199302945b26b10afdcb94be92390f4cd7b5ed2b3e6abc9d0949532f1500"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Teller.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Teller.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":18},"end":{"line":3,"column":38}},"2":{"start":{"line":4,"column":16},"end":{"line":4,"column":34}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":31}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":25}},"5":{"start":{"line":11,"column":8},"end":{"line":11,"column":84}},"6":{"start":{"line":14,"column":24},"end":{"line":14,"column":47}},"7":{"start":{"line":15,"column":34},"end":{"line":15,"column":52}},"8":{"start":{"line":16,"column":8},"end":{"line":22,"column":9}},"9":{"start":{"line":17,"column":20},"end":{"line":17,"column":30}},"10":{"start":{"line":18,"column":27},"end":{"line":18,"column":38}},"11":{"start":{"line":19,"column":28},"end":{"line":19,"column":56}},"12":{"start":{"line":20,"column":24},"end":{"line":20,"column":44}},"13":{"start":{"line":21,"column":12},"end":{"line":21,"column":62}},"14":{"start":{"line":23,"column":8},"end":{"line":23,"column":65}},"15":{"start":{"line":24,"column":8},"end":{"line":24,"column":23}},"16":{"start":{"line":27,"column":0},"end":{"line":27,"column":24}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":6,"column":4},"end":{"line":6,"column":5}},"loc":{"start":{"line":6,"column":25},"end":{"line":9,"column":5}},"line":6},"1":{"name":"(anonymous_1)","decl":{"start":{"line":10,"column":4},"end":{"line":10,"column":5}},"loc":{"start":{"line":10,"column":50},"end":{"line":12,"column":5}},"line":10},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":35},"end":{"line":25,"column":5}},"line":13}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1},"f":{"0":1,"1":1,"2":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Teller.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Teller.ts"],"names":[],"mappings":";;AAGA,uCAAiC;AACjC,mCAA6B;AAG7B,MAAa,MAAM;IAIf,YAAoC,OAA2B;QAA3B,YAAO,GAAP,OAAO,CAAoB;QAFvD,WAAM,GAAoB,EAAE,CAAC;IAGrC,CAAC;IAEM,eAAe,CAAC,SAA2B,EAAG,OAAgB,EAAE,QAAgB;QACnF,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,GAAG,IAAI,aAAK,CAAC,SAAS,EAAE,OAAO,EAAE,QAAQ,CAAC,CAAC;IACxE,CAAC;IAEM,qBAAqB,CAAC,OAAqB;QAC9C,MAAM,OAAO,GAAG,IAAI,iBAAO,EAAE,CAAC;QAC9B,MAAM,iBAAiB,GAAG,OAAO,CAAC,QAAQ,EAAE,CAAC;QAC7C,KAAK,IAAI,EAAE,IAAI,iBAAiB,EAAE;YAC9B,IAAI,CAAC,GAAG,EAAE,CAAC,OAAO,CAAC;YACnB,IAAI,QAAQ,GAAG,EAAE,CAAC,QAAQ,CAAC;YAC3B,IAAI,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC;YAC7C,IAAI,KAAK,GAAG,QAAQ,GAAG,SAAS,CAAC;YACjC,OAAO,CAAC,UAAU,CAAC,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,KAAK,CAAC,CAAC;SACrD;QACD,OAAO,CAAC,YAAY,CAAC,OAAO,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC;QAEzD,OAAO,OAAO,CAAC;IACnB,CAAC;CAEJ;AA1BD,wBA0BC","sourcesContent":["import {SupermarketCatalog} from \"./SupermarketCatalog\"\nimport {OffersByProduct, ShoppingCart} from \"./ShoppingCart\"\nimport {Product} from \"./Product\"\nimport {Receipt} from \"./Receipt\"\nimport {Offer} from \"./Offer\"\nimport {SpecialOfferType} from \"./SpecialOfferType\"\n\nexport class Teller {\n\n    private offers: OffersByProduct = {};\n\n    public constructor(private readonly catalog: SupermarketCatalog ) {\n    }\n\n    public addSpecialOffer(offerType: SpecialOfferType , product: Product, argument: number): void {\n        this.offers[product.name] = new Offer(offerType, product, argument);\n    }\n\n    public checksOutArticlesFrom(theCart: ShoppingCart): Receipt {\n        const receipt = new Receipt();\n        const productQuantities = theCart.getItems();\n        for (let pq of productQuantities) {\n            let p = pq.product;\n            let quantity = pq.quantity;\n            let unitPrice = this.catalog.getUnitPrice(p);\n            let price = quantity * unitPrice;\n            receipt.addProduct(p, quantity, unitPrice, price);\n        }\n        theCart.handleOffers(receipt, this.offers, this.catalog);\n\n        return receipt;\n    }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"db93876783392d116f952b86e66d58e1bfe4ce5a","contentHash":"77821434529afd0943ae1c5b967612c781e109a7d5c4506d8c33ff019cf398da"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Receipt.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Receipt.ts","statementMap":{"0":{"start":{"line":2,"column":19},"end":{"line":8,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},"2":{"start":{"line":3,"column":31},"end":{"line":3,"column":42}},"3":{"start":{"line":4,"column":17},"end":{"line":4,"column":19}},"4":{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},"5":{"start":{"line":5,"column":21},"end":{"line":5,"column":99}},"6":{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},"7":{"start":{"line":5,"column":80},"end":{"line":5,"column":99}},"8":{"start":{"line":6,"column":4},"end":{"line":6,"column":28}},"9":{"start":{"line":7,"column":4},"end":{"line":7,"column":18}},"10":{"start":{"line":9,"column":0},"end":{"line":9,"column":62}},"11":{"start":{"line":10,"column":22},"end":{"line":10,"column":46}},"12":{"start":{"line":11,"column":10},"end":{"line":11,"column":41}},"13":{"start":{"line":14,"column":8},"end":{"line":14,"column":24}},"14":{"start":{"line":15,"column":8},"end":{"line":15,"column":28}},"15":{"start":{"line":18,"column":20},"end":{"line":18,"column":23}},"16":{"start":{"line":19,"column":8},"end":{"line":21,"column":9}},"17":{"start":{"line":20,"column":12},"end":{"line":20,"column":37}},"18":{"start":{"line":22,"column":8},"end":{"line":24,"column":9}},"19":{"start":{"line":23,"column":12},"end":{"line":23,"column":45}},"20":{"start":{"line":25,"column":8},"end":{"line":25,"column":21}},"21":{"start":{"line":28,"column":8},"end":{"line":28,"column":87}},"22":{"start":{"line":31,"column":8},"end":{"line":31,"column":35}},"23":{"start":{"line":34,"column":8},"end":{"line":34,"column":38}},"24":{"start":{"line":37,"column":8},"end":{"line":37,"column":30}},"25":{"start":{"line":40,"column":0},"end":{"line":40,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":50},"end":{"line":2,"column":51}},"loc":{"start":{"line":2,"column":65},"end":{"line":8,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":18},"end":{"line":16,"column":5}},"line":13},"2":{"name":"(anonymous_2)","decl":{"start":{"line":17,"column":4},"end":{"line":17,"column":5}},"loc":{"start":{"line":17,"column":20},"end":{"line":26,"column":5}},"line":17},"3":{"name":"(anonymous_3)","decl":{"start":{"line":27,"column":4},"end":{"line":27,"column":5}},"loc":{"start":{"line":27,"column":47},"end":{"line":29,"column":5}},"line":27},"4":{"name":"(anonymous_4)","decl":{"start":{"line":30,"column":4},"end":{"line":30,"column":5}},"loc":{"start":{"line":30,"column":15},"end":{"line":32,"column":5}},"line":30},"5":{"name":"(anonymous_5)","decl":{"start":{"line":33,"column":4},"end":{"line":33,"column":5}},"loc":{"start":{"line":33,"column":26},"end":{"line":35,"column":5}},"line":33},"6":{"name":"(anonymous_6)","decl":{"start":{"line":36,"column":4},"end":{"line":36,"column":5}},"loc":{"start":{"line":36,"column":19},"end":{"line":38,"column":5}},"line":36}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":19},"end":{"line":8,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":20},"end":{"line":2,"column":24}},{"start":{"line":2,"column":28},"end":{"line":2,"column":45}},{"start":{"line":2,"column":50},"end":{"line":8,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},"type":"if","locations":[{"start":{"line":3,"column":4},"end":{"line":3,"column":42}},{"start":{"line":3,"column":4},"end":{"line":3,"column":42}}],"line":3},"2":{"loc":{"start":{"line":3,"column":8},"end":{"line":3,"column":29}},"type":"binary-expr","locations":[{"start":{"line":3,"column":8},"end":{"line":3,"column":11}},{"start":{"line":3,"column":15},"end":{"line":3,"column":29}}],"line":3},"3":{"loc":{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},"type":"if","locations":[{"start":{"line":5,"column":4},"end":{"line":5,"column":99}},{"start":{"line":5,"column":4},"end":{"line":5,"column":99}}],"line":5},"4":{"loc":{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},"type":"if","locations":[{"start":{"line":5,"column":40},"end":{"line":5,"column":99}},{"start":{"line":5,"column":40},"end":{"line":5,"column":99}}],"line":5}},"s":{"0":1,"1":1,"2":0,"3":1,"4":1,"5":1,"6":308,"7":308,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":1,"16":1,"17":1,"18":1,"19":0,"20":1,"21":1,"22":1,"23":0,"24":1,"25":1},"f":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":0,"6":1},"b":{"0":[1,1,1],"1":[0,1],"2":[1,1],"3":[1,0],"4":[308,0]},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Receipt.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Receipt.ts"],"names":[],"mappings":";;;;;;;;;AAEA,+CAAyC;AACzC,0CAA2B;AAE3B,MAAa,OAAO;IAApB;QACY,UAAK,GAAkB,EAAE,CAAC;QAC1B,cAAS,GAAe,EAAE,CAAC;IA4BvC,CAAC;IA1BU,aAAa;QAChB,IAAI,KAAK,GAAG,GAAG,CAAC;QAChB,KAAK,IAAI,IAAI,IAAI,IAAI,CAAC,KAAK,EAAE;YACzB,KAAK,IAAI,IAAI,CAAC,UAAU,CAAC;SAC5B;QACD,KAAM,IAAI,QAAQ,IAAI,IAAI,CAAC,SAAS,EAAE;YAClC,KAAK,IAAI,QAAQ,CAAC,cAAc,CAAC;SACpC;QACD,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,UAAU,CAAE,CAAU,EAAE,QAAgB,EAAE,KAAa,EAAE,UAAkB;QAC9E,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,yBAAW,CAAC,CAAC,EAAE,QAAQ,EAAE,KAAK,EAAE,UAAU,CAAC,CAAC,CAAC;IACrE,CAAC;IAEM,QAAQ;QACX,OAAO,CAAC,CAAC,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC/B,CAAC;IAEM,WAAW,CAAE,QAAkB;QAClC,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAClC,CAAC;IAEM,YAAY;QACf,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;CACJ;AA9BD,0BA8BC","sourcesContent":["import {Discount} from \"./Discount\"\nimport {Product} from \"./Product\"\nimport {ReceiptItem} from \"./ReceiptItem\"\nimport * as _ from \"lodash\"\n\nexport class Receipt {\n    private items: ReceiptItem[] = [];\n    private discounts: Discount[] = [];\n\n    public getTotalPrice(): number {\n        let total = 0.0;\n        for (let item of this.items) {\n            total += item.totalPrice;\n        }\n        for ( let discount of this.discounts) {\n            total -= discount.discountAmount;\n        }\n        return total;\n    }\n\n    public addProduct( p: Product, quantity: number, price: number, totalPrice: number): void {\n        this.items.push(new ReceiptItem(p, quantity, price, totalPrice));\n    }\n\n    public getItems(): ReceiptItem[] {\n        return _.clone(this.items);\n    }\n\n    public addDiscount( discount: Discount): void {\n        this.discounts.push(discount);\n    }\n\n    public getDiscounts(): Discount[] {\n        return this.discounts;\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e334084f4cd59bbf8e84243ecac90c1b55ef5d1f","contentHash":"9f62eef290941d2a955f859354463c91ee1ed6f748acc32d85f475f144b2dbd3"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ReceiptItem.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ReceiptItem.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":31}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":33}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":27}},"4":{"start":{"line":8,"column":8},"end":{"line":8,"column":37}},"5":{"start":{"line":11,"column":0},"end":{"line":11,"column":34}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":54},"end":{"line":9,"column":5}},"line":4}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1},"f":{"0":1},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ReceiptItem.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ReceiptItem.ts"],"names":[],"mappings":";;AAEA,MAAa,WAAW;IAEpB,YAAmC,OAAgB,EAChB,QAAgB,EAChB,KAAa,EACtB,UAAkB;QAHT,YAAO,GAAP,OAAO,CAAS;QAChB,aAAQ,GAAR,QAAQ,CAAQ;QAChB,UAAK,GAAL,KAAK,CAAQ;QACtB,eAAU,GAAV,UAAU,CAAQ;IAC5C,CAAC;CACJ;AAPD,kCAOC","sourcesContent":["import {Product} from \"./Product\"\n\nexport class ReceiptItem {\n\n    public constructor(public readonly product: Product,\n                       public readonly quantity: number,\n                       public readonly price: number,\n                       public totalPrice: number) {\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"1675b560c86e3aa132334584323f27c1ab9450d3","contentHash":"c73f7f36763ba72c32cf0fa858922dce498866a06158dc8c35a777f408d15905"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Offer.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Offer.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":35}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":31}},"3":{"start":{"line":7,"column":8},"end":{"line":7,"column":33}},"4":{"start":{"line":10,"column":8},"end":{"line":10,"column":28}},"5":{"start":{"line":13,"column":0},"end":{"line":13,"column":22}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":46},"end":{"line":8,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":17},"end":{"line":11,"column":5}},"line":9}},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":0,"5":1},"f":{"0":1,"1":0},"b":{},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Offer.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/Offer.ts"],"names":[],"mappings":";;AAGA,MAAa,KAAK;IAEd,YAAmC,SAA2B,EAC3B,OAAgB,EAChB,QAAgB;QAFhB,cAAS,GAAT,SAAS,CAAkB;QAC3B,YAAO,GAAP,OAAO,CAAS;QAChB,aAAQ,GAAR,QAAQ,CAAQ;IACnD,CAAC;IAED,UAAU;QACN,OAAO,IAAI,CAAC,OAAO,CAAC;IACxB,CAAC;CAEJ;AAXD,sBAWC","sourcesContent":["import {Product} from \"./Product\"\nimport {SpecialOfferType} from \"./SpecialOfferType\"\n\nexport class Offer {\n\n    public constructor(public readonly offerType: SpecialOfferType,\n                       public readonly product: Product,\n                       public readonly argument: number) {\n    }\n\n    getProduct(): Product {\n        return this.product;\n    }\n\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"7e571ec57932735facff80aa7a7f4db46bdfaf18","contentHash":"0f79f304a1d33d0b3cfc526ab2025449b91e160bbdf976c2694d0351ac703f18"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductUnit.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductUnit.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":4,"column":0},"end":{"line":7,"column":68}},"2":{"start":{"line":5,"column":4},"end":{"line":5,"column":50}},"3":{"start":{"line":6,"column":4},"end":{"line":6,"column":50}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":1},"end":{"line":4,"column":2}},"loc":{"start":{"line":4,"column":24},"end":{"line":7,"column":1}},"line":4}},"branchMap":{"0":{"loc":{"start":{"line":7,"column":17},"end":{"line":7,"column":66}},"type":"binary-expr","locations":[{"start":{"line":7,"column":17},"end":{"line":7,"column":36}},{"start":{"line":7,"column":41},"end":{"line":7,"column":65}}],"line":7}},"s":{"0":1,"1":1,"2":1,"3":1},"f":{"0":1},"b":{"0":[1,1]},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductUnit.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/model/ProductUnit.ts"],"names":[],"mappings":";;AACA,IAAY,WAEX;AAFD,WAAY,WAAW;IACnB,6CAAI,CAAA;IAAE,6CAAI,CAAA;AACd,CAAC,EAFW,WAAW,GAAX,mBAAW,KAAX,mBAAW,QAEtB","sourcesContent":["\nexport enum ProductUnit {\n    Kilo, Each\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"ea24222aca17d9b296bd2686be382a537f7107c2","contentHash":"ab6e7b0018a7579c0294e11eeb039a6dd59ba1a35aa6a40dce674e0238acfe55"},"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/ReceiptPrinter.ts":{"path":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/ReceiptPrinter.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":22},"end":{"line":3,"column":52}},"2":{"start":{"line":6,"column":8},"end":{"line":6,"column":31}},"3":{"start":{"line":9,"column":21},"end":{"line":9,"column":23}},"4":{"start":{"line":10,"column":8},"end":{"line":21,"column":9}},"5":{"start":{"line":11,"column":24},"end":{"line":11,"column":61}},"6":{"start":{"line":12,"column":27},"end":{"line":12,"column":63}},"7":{"start":{"line":13,"column":23},"end":{"line":13,"column":40}},"8":{"start":{"line":14,"column":28},"end":{"line":14,"column":60}},"9":{"start":{"line":15,"column":33},"end":{"line":15,"column":74}},"10":{"start":{"line":16,"column":23},"end":{"line":16,"column":89}},"11":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"12":{"start":{"line":18,"column":16},"end":{"line":18,"column":67}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":27}},"14":{"start":{"line":22,"column":8},"end":{"line":34,"column":9}},"15":{"start":{"line":23,"column":38},"end":{"line":23,"column":59}},"16":{"start":{"line":24,"column":36},"end":{"line":24,"column":81}},"17":{"start":{"line":25,"column":30},"end":{"line":25,"column":50}},"18":{"start":{"line":26,"column":12},"end":{"line":26,"column":34}},"19":{"start":{"line":27,"column":12},"end":{"line":27,"column":26}},"20":{"start":{"line":28,"column":12},"end":{"line":28,"column":42}},"21":{"start":{"line":29,"column":12},"end":{"line":29,"column":26}},"22":{"start":{"line":30,"column":12},"end":{"line":30,"column":146}},"23":{"start":{"line":31,"column":12},"end":{"line":31,"column":26}},"24":{"start":{"line":32,"column":12},"end":{"line":32,"column":40}},"25":{"start":{"line":33,"column":12},"end":{"line":33,"column":27}},"26":{"start":{"line":35,"column":8},"end":{"line":35,"column":23}},"27":{"start":{"line":36,"column":32},"end":{"line":36,"column":77}},"28":{"start":{"line":37,"column":20},"end":{"line":37,"column":29}},"29":{"start":{"line":38,"column":25},"end":{"line":38,"column":109}},"30":{"start":{"line":39,"column":8},"end":{"line":39,"column":24}},"31":{"start":{"line":40,"column":8},"end":{"line":40,"column":29}},"32":{"start":{"line":41,"column":8},"end":{"line":41,"column":36}},"33":{"start":{"line":42,"column":8},"end":{"line":42,"column":22}},"34":{"start":{"line":45,"column":8},"end":{"line":48,"column":26}},"35":{"start":{"line":51,"column":8},"end":{"line":54,"column":97}},"36":{"start":{"line":57,"column":8},"end":{"line":57,"column":42}},"37":{"start":{"line":60,"column":0},"end":{"line":60,"column":40}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":30},"end":{"line":7,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":8,"column":4},"end":{"line":8,"column":5}},"loc":{"start":{"line":8,"column":26},"end":{"line":43,"column":5}},"line":8},"2":{"name":"(anonymous_2)","decl":{"start":{"line":44,"column":4},"end":{"line":44,"column":5}},"loc":{"start":{"line":44,"column":28},"end":{"line":49,"column":5}},"line":44},"3":{"name":"(anonymous_3)","decl":{"start":{"line":50,"column":4},"end":{"line":50,"column":5}},"loc":{"start":{"line":50,"column":33},"end":{"line":55,"column":5}},"line":50},"4":{"name":"(anonymous_4)","decl":{"start":{"line":56,"column":4},"end":{"line":56,"column":5}},"loc":{"start":{"line":56,"column":41},"end":{"line":58,"column":5}},"line":56}},"branchMap":{"0":{"loc":{"start":{"line":5,"column":16},"end":{"line":5,"column":28}},"type":"default-arg","locations":[{"start":{"line":5,"column":26},"end":{"line":5,"column":28}}],"line":5},"1":{"loc":{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},"type":"if","locations":[{"start":{"line":17,"column":12},"end":{"line":19,"column":13}},{"start":{"line":17,"column":12},"end":{"line":19,"column":13}}],"line":17},"2":{"loc":{"start":{"line":51,"column":15},"end":{"line":54,"column":96}},"type":"cond-expr","locations":[{"start":{"line":53,"column":14},"end":{"line":53,"column":96}},{"start":{"line":54,"column":14},"end":{"line":54,"column":96}}],"line":51}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":1,"6":1,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":1,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":1,"27":1,"28":1,"29":1,"30":1,"31":1,"32":1,"33":1,"34":3,"35":1,"36":2,"37":1},"f":{"0":1,"1":1,"2":3,"3":1,"4":2},"b":{"0":[1],"1":[1,0],"2":[0,1]},"inputSourceMap":{"version":3,"file":"/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/ReceiptPrinter.ts","sources":["/Users/charly.de.cola/Octo/katas/SupermarketReceipt-Refactoring-Kata/typescript/src/ReceiptPrinter.ts"],"names":[],"mappings":"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","sourcesContent":["import {ProductUnit} from \"./model/ProductUnit\"\nimport {ReceiptItem} from \"./model/ReceiptItem\"\nimport {Receipt} from \"./model/Receipt\"\n\nexport class ReceiptPrinter {\n\n    public constructor(private readonly columns: number = 40) {\n    }\n\n    public printReceipt( receipt: Receipt): string {\n        let result = \"\";\n        for (const item of receipt.getItems()) {\n            let price = this.format2Decimals(item.totalPrice);\n            let quantity = ReceiptPrinter.presentQuantity(item);\n            let name = item.product.name;\n            let unitPrice = this.format2Decimals(item.price);\n\n            let whitespaceSize = this.columns - name.length - price.length;\n            let line = name + ReceiptPrinter.getWhitespace(whitespaceSize) + price + \"\\n\";\n\n            if (item.quantity != 1) {\n                line += \"  \" + unitPrice + \" * \" + quantity + \"\\n\";\n            }\n            result += line;\n        }\n        for (const discount of receipt.getDiscounts()) {\n            let productPresentation = discount.product.name;\n            let pricePresentation = this.format2Decimals(discount.discountAmount);\n            let description = discount.description;\n            result += description;\n            result += \"(\";\n            result += productPresentation;\n            result += \")\";\n            result += ReceiptPrinter.getWhitespace(this.columns - 3 - productPresentation.length - description.length - pricePresentation.length);\n            result += \"-\";\n            result += pricePresentation;\n            result += \"\\n\";\n        }\n        result += \"\\n\";\n        let pricePresentation = this.format2Decimals(receipt.getTotalPrice());\n        let total = \"Total: \";\n        let whitespace = ReceiptPrinter.getWhitespace(this.columns - total.length - pricePresentation.length);\n        result += total;\n        result += whitespace;\n        result += pricePresentation;\n\n        return result;\n    }\n\n    private format2Decimals(number: number) {\n        return new Intl.NumberFormat('en-UK', {\n            minimumFractionDigits: 2,\n            maximumFractionDigits: 2\n        }).format(number)\n    }\n\n    private static presentQuantity( item: ReceiptItem): string  {\n        return ProductUnit.Each == item.product.unit\n            // TODO make sure this is the simplest way to make something similar to the java version\n                ? new Intl.NumberFormat('en-UK', {maximumFractionDigits: 0}).format(item.quantity)\n                : new Intl.NumberFormat('en-UK', {minimumFractionDigits: 3}).format(item.quantity);\n    }\n\n    private static getWhitespace(whitespaceSize: number): string {\n        return \" \".repeat(whitespaceSize);\n    }\n}\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"6c44dd8a11930ce8a85378ba384ff95f95328b86","contentHash":"a5bdb59630341cf9e5a2bddbdb70ea3b6fa5e1eb953b3e44c023f9fad8d4e1f6"}}